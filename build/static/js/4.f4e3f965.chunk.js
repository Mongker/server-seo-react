(this["webpackJsonpstartup-base"]=this["webpackJsonpstartup-base"]||[]).push([[4],{475:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(47),s=n.n(c),i=n(86),l=n.n(i),o=n(87),d=n.n(o),u=n(88),j=n(10),h=n(216),b=n(152),p=n(153),x=n(217),f=n(215),O=n(470),m=n(50),v=n(472),_=n(469),g=n(474),y=n(476),w=n(1),N=["form","index"],C=["editable","dataIndex","title","record","index","handleSave","children"],S=r.a.createContext(),k=g.a.create()((function(e){var t=e.form,n=(e.index,Object(_.a)(e,N));return Object(w.jsx)(S.Provider,{value:t,children:Object(w.jsx)("tr",Object(j.a)({},n))})})),I=function(e){Object(x.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={editing:!1},e.toggleEdit=function(){var t=!e.state.editing;e.setState({editing:t},(function(){t&&e.input.focus()}))},e.save=function(t){var n=e.props,a=n.record,r=n.handleSave;e.form.validateFields((function(n,c){n&&n[t.currentTarget.id]||(e.toggleEdit(),r(Object(j.a)(Object(j.a)({},a),c)))}))},e.renderCell=function(t){e.form=t;var n=e.props,a=n.children,r=n.dataIndex,c=n.record,s=n.title;return e.state.editing?Object(w.jsx)(g.a.Item,{style:{margin:0},children:t.getFieldDecorator(r,{rules:[{required:!0,message:"".concat(s," is required.")}],initialValue:c[r]})(Object(w.jsx)(y.a,{ref:function(t){return e.input=t},onPressEnter:e.save,onBlur:e.save}))}):Object(w.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24,minHeight:32},onClick:e.toggleEdit,children:a})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.editable,n=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),a=Object(_.a)(e,C);return Object(w.jsx)("td",Object(j.a)(Object(j.a)({},a),{},{children:t?Object(w.jsx)(S.Consumer,{children:this.renderCell}):n}))}}]),n}(r.a.Component),T=n(340),V=n.n(T).a.create({baseURL:"http://localhost:4040",headers:{"X-Custom-Header":"foobar","Content-Type":"application/json"}});V.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),V.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var E=V,M=n(358),D=n.n(M),A="",P={getAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=D.a.stringify(t);return E.get("".concat(e,"?").concat(n))},add:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;return console.log("url",e),E.post(e,t)},update:function(){var e=arguments.length>1?arguments[1]:void 0;return E.put(A,e)},delete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n="".concat(e,"/").concat(t);return E.delete(n)}},L=P,B=(a.Component,n(113)),F=n(480),G=n(94),q=n(477),R=n(473),U=n(424);function H(e){var t=e.TableSum,n=e.rows,a=e.columns;return Object(w.jsxs)(r.a.Fragment,{children:[t(n),Object(w.jsx)("div",{style:{marginTop:20}}),Object(w.jsx)("div",{className:l.a.box_shadow,children:Object(w.jsx)(v.a,{dataSource:n,columns:a})})]})}H.defaultProps={};var J=H;function W(e){var t=e.visible,n=e.setVisible,a=e.columns,c=(e.itemsCapitalSpent,e.updateItems),s=e.TableSum,i=r.a.useState([]),l=Object(B.a)(i,2),o=l[0],j=l[1],h=r.a.useState(""),b=Object(B.a)(h,2),p=(b[0],b[1]);function x(){return(x=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=L.add("/transaction",{data:o}),(a=t.items)&&c(a),n(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsxs)(q.a,{title:Object(w.jsx)("h1",{style:{textAlign:"center"},children:"Th\xeam d\u1eef li\u1ec7u"}),visible:t,onOk:function(){return x.apply(this,arguments)},onCancel:function(){n(!1),j([])},width:.9*window.innerWidth,children:[t&&Object(w.jsx)(R.a,{name:"file",beforeUpload:function(e){console.log("fileList",e);var t=e;return t?"application/vnd.ms-excel"!==t.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==t.type?(p("Unknown file format. Only Excel files are uploaded!"),!1):(Object(U.ExcelRenderer)(t,(function(e,t){if(e)console.log(e);else{var n=[];if(t.rows.slice(1).map((function(e,t){if(e&&"undefined"!==e){console.log("row",e);var a=Number(e[11])*(e[4]-e[6]);n.push({key:t,code:e[0],name:e[1],number_of_products_sold:e[4],revenue:e[5],number_of_returned_orders:e[6],value_of_returned_goods:e[7],revenue_sum:e[5]-e[7],date:e[10],capital_spent:a,profit:e[9]-a})}})),0===n.length)return p("No data found in file!"),!1;j(n),p("")}})),!1):(p("No file uploaded!"),!1)},onRemove:function(){return j([])},multiple:!1,children:Object(w.jsx)(G.a,{type:"primary",children:Object(w.jsx)(m.a,{type:"upload"})})}),Object(w.jsx)(J,{columns:a,rows:o,TableSum:s})]})}W.defaultProps={visible:!1,setVisible:function(){return null}};var Y=W;var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" VN\u0110",n=Math.round(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+t;return n};var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=0;return Array.isArray(e)&&e.map((function(e){n+=e[t]})),n},z=n(214),K=n(478);z.a.Option;function Q(e){var t=e.getList,n=new Date,a=r.a.useState(n.getDate()),c=Object(B.a)(a,2),i=c[0],o=c[1],j=r.a.useState(n.getMonth()),h=Object(B.a)(j,2),b=h[0],p=h[1],x=r.a.useState(n.getFullYear()),f=Object(B.a)(x,2),O=f[0],m=f[1],v=r.a.useState(""),_=Object(B.a)(v,2),g=_[0],N=_[1];function C(){return S.apply(this,arguments)}function S(){return S=Object(u.a)(d.a.mark((function e(){var a,r,c,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=s.length>0&&void 0!==s[0]&&s[0],r={},c={day:n.getDate(),month:n.getMonth(),year:n.getFullYear()},O&&(r.year=O),b&&(r.month=b),i&&(r.day=i),g.length>0&&(r.code=g),t(a?c:r);case 9:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}return Object(w.jsxs)("div",{className:s()(l.a.wrapper_search_all),children:[Object(w.jsxs)("div",{className:s()(l.a.display_flex_end),children:[Object(w.jsx)("div",{className:s()(l.a.text),style:{width:50},children:"Ng\xe0y: "}),Object(w.jsx)(K.a,{style:{width:50},value:i,min:0,max:31,onChange:o})," ","-",Object(w.jsx)(K.a,{style:{width:50},value:b,min:0,max:12,onChange:p})," ","-",Object(w.jsx)(K.a,{style:{width:75},value:O,onChange:m})]}),Object(w.jsxs)("div",{className:s()(l.a.display_flex_end),children:[Object(w.jsx)("div",{className:s()(l.a.text),children:"M\xe3 s\u1ea3n ph\u1ea9m: "}),Object(w.jsx)(y.a,{value:g,onChange:function(e){return N(e.target.value)}})]}),Object(w.jsx)(G.a,{type:"primary",icon:"search",style:{width:80,marginLeft:10,marginRight:10,height:30},onClick:function(){return C()}}),Object(w.jsx)(G.a,{type:"primary",icon:"reload",onClick:function(){return C(!0)}})]})}Q.defaultProps={getList:function(){return null}};var X=Q,ee=n(16),te=n(479);function ne(e){var t=e.visible,n=e.setVisible,a=e.setItems,c=e.dataNow,i=r.a.useState({date:"".concat(c.day,"/").concat(c.month,"/").concat(c.year)}),o=Object(B.a)(i,2),h=o[0],b=o[1];function p(e,t){b(Object(j.a)(Object(j.a)({},h),{},Object(ee.a)({},t,e.target.value)))}function x(e,t){b(Object(j.a)(Object(j.a)({},h),{},Object(ee.a)({},t,e)))}function f(){return(f=Object(u.a)(d.a.mark((function e(){var t,n,r,c,s,i,l,o,u,b,p,x;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.date,n=h.code,r=h.name,c=h.number_of_products_sold,s=h.price,i=h.capital_spent_one,l=i*c*1e3,o=s*c*1e3,!(t&&n&&r&&c&&s&&i)){e.next=19;break}return u={code:n,name:r,number_of_products_sold:c,revenue:o,revenue_sum:o,date:t,capital_spent:l,profit:o-l},e.next=7,L.add("/api/transaction",{data:[u]});case 7:return b=e.sent,p=b.items,e.next=11,Object(j.a)(Object(j.a)({},Object.values(p)[0]),u);case 11:if(x=e.sent,e.t0=p,!e.t0){e.next=16;break}return e.next=16,a(x._id,x);case 16:O(),e.next=20;break;case 19:te.a.error("L\u1ed7i \u0111\u1ecbnh d\u1ea1ng nh\u1eadp");case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){n(!1),b({})}return console.log("data",h),Object(w.jsx)(q.a,{title:Object(w.jsx)("h1",{style:{textAlign:"center"},children:"Th\xeam d\u1eef li\u1ec7u"}),visible:t,onOk:function(){return f.apply(this,arguments)},onCancel:O,width:.6*window.innerWidth,children:Object(w.jsxs)("div",{className:s()("grid",l.a.wrapper_add_one),style:{margin:"0 auto"},children:[Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col l-3",children:Object(w.jsx)("span",{children:"Ng\xe0y: "})}),Object(w.jsx)("div",{className:"col l-9",children:Object(w.jsx)(y.a,{placeholder:"dd/mm/yyyy",style:{width:120},value:h.date,onChange:function(e){return p(e,"date")}})})]}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col l-3",children:Object(w.jsx)("span",{children:"M\xe3 h\xe0ng: "})}),Object(w.jsx)("div",{className:"col l-9",children:Object(w.jsx)(y.a,{onChange:function(e){return p(e,"code")}})})]}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col l-3",children:Object(w.jsx)("span",{children:"T\xean: "})}),Object(w.jsx)("div",{className:"col l-9",children:Object(w.jsx)(y.a,{onChange:function(e){return p(e,"name")}})})]}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col l-3",children:Object(w.jsx)("span",{children:"S\u1ed1 l\u01b0\u1ee3ng b\xe1n: "})}),Object(w.jsx)("div",{className:"col l-9",children:Object(w.jsx)(K.a,{formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},min:1,style:{width:"100px"},onChange:function(e){return x(e,"number_of_products_sold")}})})]}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col l-3",children:Object(w.jsx)("span",{children:"V\u1ed1n nh\u1eadp /1 \u0111\u01a1n v\u1ecb: "})}),Object(w.jsx)("div",{className:"col l-9",children:Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col l-4",children:Object(w.jsx)(K.a,{formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},min:1,style:{width:"100%"},onChange:function(e){return x(e,"capital_spent_one")}})}),Object(w.jsx)("div",{className:"col l-4",children:"x 1000(vn\u0111) ="}),Object(w.jsx)("div",{className:"col l-4",children:Object(w.jsx)("span",{children:h&&h.capital_spent_one?$(1e3*h.capital_spent_one):"0 VND"})})]})})]}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col l-3",children:Object(w.jsx)("span",{children:"Gi\xe1 b\xe1n/ 1 \u0111\u01a1n v\u1ecb: "})}),Object(w.jsx)("div",{className:"col l-9",children:Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col l-4",children:Object(w.jsx)(K.a,{formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},min:h&&h.capital_spent_one&&h?h.capital_spent_one:0,style:{width:"100%"},onChange:function(e){return x(e,"price")}})}),Object(w.jsx)("div",{className:"col l-3",children:"x 1000(vn\u0111) ="}),Object(w.jsx)("div",{className:"col l-5",children:Object(w.jsx)("span",{children:h&&h.price?$(1e3*h.price):"0 VND"})})]})})]})]})})}ne.defaultProps={visible:!1,setVisible:function(){return null},setItems:function(){return null}};var ae=ne,re=new Date,ce={day:re.getDate(),month:re.getMonth(),year:re.getFullYear()};function se(){var e=r.a.useState({}),t=Object(B.a)(e,2),n=t[0],a=t[1],c=r.a.useState({"CA17PN-445EV/2M":15e3,"CA17PN-612EV/2M":3e5,"VAN612 EV/2M":25e4,"NEP335 2CM":6e4,"CA9TL-445EV/2M":7e4,"NEP101 G 4CM":2e5}),i=Object(B.a)(c,1)[0],o=r.a.useState(!1),b=Object(B.a)(o,2),p=b[0],x=b[1],f=r.a.useState(!1),_=Object(B.a)(f,2),g=_[0],y=_[1],N=r.a.useState(!1),C=Object(B.a)(N,2),S=(C[0],C[1],function(){var e=Object(u.a)(d.a.mark((function e(t){var r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(r=Object(j.a)({},n))[t],e.next=4,L.delete("/api/transaction",t);case 4:if(c=e.sent,s=c.message,e.t0=s,!e.t0){e.next=10;break}return e.next=10,a(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=r.a.useMemo((function(){return[{title:"Ng\xe0y giao d\u1ecbch",dataIndex:"date"},{title:"M\xe3 h\xe0ng",dataIndex:"code",render:function(e){return Object(w.jsx)("h4",{style:{color:"#f87f7f"},children:e})}},{title:"T\xean",dataIndex:"name"},{title:"SL B\xe1n",dataIndex:"number_of_products_sold"},{title:"Doanh thu",dataIndex:"revenue",render:function(e){return Object(w.jsx)(F.a,{color:"orange",children:$(e)})}},{title:"SL Tr\u1ea3",dataIndex:"number_of_returned_orders"},{title:"Gi\xe1 tr\u1ecb tr\u1ea3",dataIndex:"value_of_returned_goods",render:function(e){return Object(w.jsx)(F.a,{color:"red",children:$(e)})}},{title:"Doanh thu thu\u1ea7n",dataIndex:"revenue_sum",render:function(e){return Object(w.jsx)(F.a,{color:"orange",children:$(e)})}},{title:"G\xeda nh\u1eadp",dataIndex:"capital_spent",render:function(e){return Object(w.jsx)(F.a,{color:"blue",children:$(e)})}},{title:"L\u1ee3i nhu\u1eadn",dataIndex:"profit",render:function(e){return Object(w.jsx)(F.a,{color:"green",children:$(e)})}}]}),[n]),V=r.a.useCallback((function(e){return x(e)}),[p]),E=r.a.useCallback((function(e){return y(e)}),[g]),M=r.a.useCallback((function(e){return a(Object(j.a)(Object(j.a)({},n),e))}),[n]),D=r.a.useMemo((function(){return Object.values(n).sort((function(e,t){return new Date(e.create).getTime()-new Date(t.create).getTime()}))}),[n]);function A(){return P.apply(this,arguments)}function P(){return P=Object(u.a)(d.a.mark((function e(){var t,n,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,L.getAll("/api/transaction",t);case 3:(n=e.sent)&&a(n);case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}r.a.useEffect((function(){A(ce).then()}),[]);var q=Object(h.a)(T).concat([{title:"Action",dataIndex:"action",render:function(e,t){return Object(w.jsx)(O.a,{title:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a?",onConfirm:function(){return S(t._id)},children:Object(w.jsx)(m.a,{type:"delete",theme:"filled",style:{color:"red",fontSize:"20px"}})})}}]),R={body:{row:k,cell:I}},U=function(e){return Object(w.jsxs)("table",{style:{width:"100%"},className:s()("table_sum",l.a.box_shadow),children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Doanh thu"}),Object(w.jsx)("th",{children:"Gi\xe1 nh\u1eadp"}),Object(w.jsx)("th",{children:"L\u1ee3i nhu\xe2n"})]}),Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:Object(w.jsx)("h3",{style:{color:"orange"},children:$(Z(e,"revenue"))})}),Object(w.jsx)("th",{children:Object(w.jsx)("h3",{style:{color:"blue"},children:$(Z(e,"capital_spent"))})}),Object(w.jsx)("th",{children:Object(w.jsx)("h3",{style:{color:"green"},children:$(Z(e,"profit"))})})]})]})};return Object(w.jsxs)("div",{style:{margin:50},children:[Object(w.jsx)("div",{className:l.a.position_fixed,style:{width:.9*window.innerWidth},children:Object(w.jsxs)("div",{className:l.a.display,children:[Object(w.jsx)(G.a,{type:"primary",onClick:function(){return E(!0)},children:"Th\xeam"}),Object(w.jsx)(G.a,{type:"primary",onClick:function(){return V(!0)},children:"Th\xeam b\u1eb1ng excel "}),Object(w.jsx)(X,{getList:A})]})}),Object(w.jsx)("div",{style:{marginTop:20}}),U(D),Object(w.jsx)("div",{style:{marginTop:20}}),Object(w.jsx)(v.a,{components:R,rowClassName:function(){return"editable-row"},dataSource:D,columns:q}),g&&Object(w.jsx)(ae,{dataNow:ce,setItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(j.a)({},n);r[e]=t,a(Object(j.a)({},r))},visible:g,setVisible:E}),Object(w.jsx)(Y,{TableSum:U,visible:p,setVisible:V,columns:T,itemsCapitalSpent:i,updateItems:M})]})}se.defaultProps={};var ie=se;t.default=function(){return Object(w.jsxs)("div",{className:s()(l.a.container),style:{height:1.5*window.innerHeight},children:[Object(w.jsx)("div",{className:s()(l.a.title),children:Object(w.jsx)("h1",{children:"Th\u1ed1ng k\xea doanh thu doanh nghi\u1ec7p"})}),Object(w.jsx)("div",{style:{display:"block",margin:50},children:Object(w.jsx)(ie,{})})]})}},86:function(e,t,n){e.exports={container:"styles_container__2jf6Z",title:"styles_title__29GAE",position_fixed:"styles_position_fixed__36Q_-",display:"styles_display__2wIsC",wrapper_search_all:"styles_wrapper_search_all__1Cfq0",text:"styles_text__1FmwK",display_flex_end:"styles_display_flex_end__3xJ51",display_center:"styles_display_center__2Zif_",wrapper_search:"styles_wrapper_search__2h5fl",box_shadow:"styles_box_shadow__cDyEV",wrapper_add_one:"styles_wrapper_add_one__2qm4U"}}}]);
//# sourceMappingURL=4.f4e3f965.chunk.js.map